import{d as D,r as u,o as I,c as M,a as e,w as a,b as n,f as b,p as h,h as f,E as U,e as K}from"./index-jh95nJwH.js";import{u as L}from"./user-TGyX2SHZ.js";import{d as R,t as T,e as $}from"./admin-DpVAbB1S.js";import{_ as H}from"./_plugin-vue_export-helper-BDJoutlP.js";const P={class:"admin-users"},j={class:"toolbar"},q={class:"pager"},F=D({__name:"AdminUsers",setup(G){const C=L(),g=u([]),w=u(0),p=u(1),i=u(10),c=u(""),m=u(""),v=u(""),s=async()=>{const{data:o}=await R({page:p.value,size:i.value,keyword:c.value||void 0,role:m.value||void 0,status:v.value||void 0});g.value=o.list,w.value=o.total},V=o=>{i.value=o,p.value=1,s()},x=async o=>{await T(o),U.success("已更新"),s()},z=async o=>{await $(o),U.success("已删除"),s()};return I(()=>{C.initUser(),s()}),(o,l)=>{const k=n("el-input"),r=n("el-option"),y=n("el-select"),_=n("el-button"),d=n("el-table-column"),E=n("el-popconfirm"),S=n("el-table"),A=n("el-pagination"),N=n("el-card");return K(),M("div",P,[e(N,null,{header:a(()=>[...l[5]||(l[5]=[b("div",{class:"card-header"},"用户管理",-1)])]),default:a(()=>[b("div",j,[e(k,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=t=>c.value=t),placeholder:"搜索用户名/昵称",style:{width:"260px"},clearable:"",onKeyup:h(s,["enter","native"])},null,8,["modelValue"]),e(y,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t),placeholder:"角色",style:{width:"140px"},clearable:""},{default:a(()=>[e(r,{label:"全部",value:""}),e(r,{label:"用户",value:"USER"}),e(r,{label:"商家",value:"MERCHANT"}),e(r,{label:"管理员",value:"ADMIN"})]),_:1},8,["modelValue"]),e(y,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=t=>v.value=t),placeholder:"状态",style:{width:"140px"},clearable:""},{default:a(()=>[e(r,{label:"全部",value:""}),e(r,{label:"启用",value:"ENABLED"}),e(r,{label:"禁用",value:"DISABLED"})]),_:1},8,["modelValue"]),e(_,{type:"primary",onClick:s},{default:a(()=>[...l[6]||(l[6]=[f("查询",-1)])]),_:1})]),e(S,{data:g.value,stripe:""},{default:a(()=>[e(d,{prop:"id",label:"ID",width:"80"}),e(d,{prop:"username",label:"用户名"}),e(d,{prop:"nickname",label:"昵称"}),e(d,{prop:"role",label:"角色",width:"100"}),e(d,{prop:"status",label:"状态",width:"100"}),e(d,{label:"操作",width:"200"},{default:a(({row:t})=>[e(_,{size:"small",type:"warning",onClick:B=>x(t.id)},{default:a(()=>[...l[7]||(l[7]=[f("切换启用",-1)])]),_:2},1032,["onClick"]),e(E,{title:"确认删除该用户？",onConfirm:B=>z(t.id)},{reference:a(()=>[e(_,{size:"small",type:"danger"},{default:a(()=>[...l[8]||(l[8]=[f("删除",-1)])]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),b("div",q,[e(A,{"current-page":p.value,"onUpdate:currentPage":l[3]||(l[3]=t=>p.value=t),"page-size":i.value,"onUpdate:pageSize":l[4]||(l[4]=t=>i.value=t),total:w.value,layout:"total, prev, pager, next",onCurrentChange:s,onSizeChange:V},null,8,["current-page","page-size","total"])])]),_:1})])}}}),X=H(F,[["__scopeId","data-v-58e16559"]]);export{X as default};
