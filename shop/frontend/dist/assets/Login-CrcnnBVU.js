import{d as C,r as A,l as U,c as T,a as l,w as o,b as a,f as i,m as V,h as m,E as c,u as y,e as H}from"./index-jh95nJwH.js";import{u as S}from"./user-TGyX2SHZ.js";import{_ as I}from"./_plugin-vue_export-helper-BDJoutlP.js";const D={class:"login-container"},k=C({__name:"Login",setup(x){const M=y(),R=S(),p=A(),g=A(!1),_=A("AUTO"),s=U({username:"",password:""}),N={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},b=async()=>{if(p.value)try{await p.value.validate(),g.value=!0,await R.login(s),c.success("登录成功");const t=R.getUserRole(),e=_.value,n=r=>{M.push(r)};return((r,u)=>r?u==="AUTO"?!0:u==="USER"?r==="USER"||r==="MERCHANT":u==="MERCHANT"?r==="MERCHANT":u==="ADMIN"?r==="ADMIN":!1:!1)(t,e)||c.warning("当前账号无权进入所选端，将为您跳转到可访问的页面"),n(e==="ADMIN"&&t==="ADMIN"?"/admin":e==="MERCHANT"&&t==="MERCHANT"?"/merchant":e==="USER"&&(t==="USER"||t==="MERCHANT")?"/":t==="ADMIN"?"/admin":t==="MERCHANT"?"/merchant":"/")}catch(t){c.error(t.message||"登录失败")}finally{g.value=!1}};return(t,e)=>{const n=a("el-input"),f=a("el-form-item"),r=a("el-radio"),u=a("el-radio-group"),w=a("el-button"),v=a("el-form"),E=a("el-card");return H(),T("div",D,[l(E,{class:"login-card"},{header:o(()=>[...e[4]||(e[4]=[i("h2",null,"用户登录",-1)])]),default:o(()=>[l(v,{ref_key:"loginFormRef",ref:p,model:s,rules:N,"label-width":"80px",onSubmit:V(b,["prevent"])},{default:o(()=>[l(f,{label:"用户名",prop:"username"},{default:o(()=>[l(n,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=d=>s.username=d),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])]),_:1}),l(f,{label:"密码",prop:"password"},{default:o(()=>[l(n,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=d=>s.password=d),type:"password",placeholder:"请输入密码","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),l(f,{label:"进入方式"},{default:o(()=>[l(u,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=d=>_.value=d)},{default:o(()=>[l(r,{label:"AUTO"},{default:o(()=>[...e[5]||(e[5]=[m("自动识别",-1)])]),_:1}),l(r,{label:"USER"},{default:o(()=>[...e[6]||(e[6]=[m("用户端",-1)])]),_:1}),l(r,{label:"MERCHANT"},{default:o(()=>[...e[7]||(e[7]=[m("商家端",-1)])]),_:1}),l(r,{label:"ADMIN"},{default:o(()=>[...e[8]||(e[8]=[m("管理端",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(f,null,{default:o(()=>[l(w,{type:"primary",onClick:b,loading:g.value},{default:o(()=>[...e[9]||(e[9]=[m(" 登录 ",-1)])]),_:1},8,["loading"]),l(w,{onClick:e[3]||(e[3]=d=>t.$router.push("/register"))},{default:o(()=>[...e[10]||(e[10]=[m(" 注册账号 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),e[11]||(e[11]=i("div",{class:"demo-accounts"},[i("h4",null,"测试账号："),i("p",null,"管理员：admin / 123456"),i("p",null,"商家：merchant / 123456"),i("p",null,"用户：testuser / 123456")],-1))]),_:1})])}}}),O=I(k,[["__scopeId","data-v-c53574ef"]]);export{O as default};
