import{d as A,r as u,o as B,c as I,a as t,w as s,b as n,f,p as $,h as m,j as y,g,e as v,E as k}from"./index-jh95nJwH.js";import{u as G}from"./user-TGyX2SHZ.js";import{f as K,h as O,s as R,r as j}from"./admin-DpVAbB1S.js";import{_ as T}from"./_plugin-vue_export-helper-BDJoutlP.js";const q={class:"admin-merchants"},F={class:"toolbar"},H={class:"pager"},J=A({__name:"AdminMerchants",setup(L){const E=G(),_=u(""),b=u(""),C=u([]),V=u(0),p=u(1),i=u(10),o=async()=>{const{data:l}=await K({page:p.value,size:i.value,keyword:_.value||void 0,status:b.value||void 0});C.value=l.list,V.value=l.total},N=l=>{i.value=l,p.value=1,o()},z=async l=>{await O(l),k.success("已通过"),o()},h=async l=>{await R(l),k.success("已暂停"),o()},D=async l=>{await j(l),k.success("已恢复"),o()};return B(()=>{E.initUser(),o()}),(l,e)=>{const P=n("el-input"),d=n("el-option"),S=n("el-select"),c=n("el-button"),r=n("el-table-column"),x=n("el-table"),M=n("el-pagination"),U=n("el-card");return v(),I("div",q,[t(U,null,{header:s(()=>[...e[4]||(e[4]=[f("div",{class:"card-header"},"商家管理",-1)])]),default:s(()=>[f("div",F,[t(P,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),placeholder:"搜索店铺名",style:{width:"260px"},clearable:"",onKeyup:$(o,["enter","native"])},null,8,["modelValue"]),t(S,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),placeholder:"状态",style:{width:"160px"},clearable:""},{default:s(()=>[t(d,{label:"全部",value:""}),t(d,{label:"待审核",value:"PENDING"}),t(d,{label:"已通过",value:"APPROVED"}),t(d,{label:"已暂停",value:"SUSPENDED"})]),_:1},8,["modelValue"]),t(c,{type:"primary",onClick:o},{default:s(()=>[...e[5]||(e[5]=[m("查询",-1)])]),_:1})]),t(x,{data:C.value,stripe:""},{default:s(()=>[t(r,{prop:"id",label:"ID",width:"80"}),t(r,{prop:"shopName",label:"店铺名"}),t(r,{prop:"user.username",label:"归属用户"}),t(r,{prop:"status",label:"状态",width:"120"}),t(r,{label:"操作",width:"260"},{default:s(({row:a})=>[a.status==="PENDING"?(v(),y(c,{key:0,size:"small",type:"success",onClick:w=>z(a.id)},{default:s(()=>[...e[6]||(e[6]=[m("通过审核",-1)])]),_:2},1032,["onClick"])):g("",!0),a.status==="APPROVED"?(v(),y(c,{key:1,size:"small",type:"warning",onClick:w=>h(a.id)},{default:s(()=>[...e[7]||(e[7]=[m("暂停",-1)])]),_:2},1032,["onClick"])):g("",!0),a.status==="SUSPENDED"?(v(),y(c,{key:2,size:"small",type:"primary",onClick:w=>D(a.id)},{default:s(()=>[...e[8]||(e[8]=[m("恢复启用",-1)])]),_:2},1032,["onClick"])):g("",!0)]),_:1})]),_:1},8,["data"]),f("div",H,[t(M,{"current-page":p.value,"onUpdate:currentPage":e[2]||(e[2]=a=>p.value=a),"page-size":i.value,"onUpdate:pageSize":e[3]||(e[3]=a=>i.value=a),total:V.value,layout:"total, prev, pager, next",onCurrentChange:o,onSizeChange:N},null,8,["current-page","page-size","total"])])]),_:1})])}}}),Z=T(J,[["__scopeId","data-v-ba79fc9d"]]);export{Z as default};
