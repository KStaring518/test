import{d as T,r as O,o as z,c as I,a as s,w as e,b as l,f as a,h as u,j as V,i as v,F,t as i,A as H,B as S,u as L,E as U,e as h}from"./index-jh95nJwH.js";import{u as G}from"./user-TGyX2SHZ.js";import{g as j,a as q,b as J,c as K}from"./merchant-BqVm6Od2.js";import{i as k}from"./index-OzhOYD-U.js";import{_ as Q}from"./_plugin-vue_export-helper-BDJoutlP.js";const W={class:"merchant-dashboard"},X={class:"header-content"},Y={class:"user-info"},Z={class:"dashboard-container"},tt={class:"stats-section"},st={class:"stat-content"},et={class:"stat-number"},at={class:"stat-content"},ot={class:"stat-number"},nt={class:"stat-content"},lt={class:"stat-number"},dt={class:"stat-content"},rt={class:"stat-number"},it={class:"stat-content"},ut={class:"stat-number"},ct={class:"stat-content"},pt={class:"stat-number"},mt={class:"stat-content"},_t={class:"stat-number"},vt={class:"charts-section"},ft={class:"quick-actions"},gt={class:"action-content"},yt={class:"action-content"},bt={class:"action-content"},ht={class:"recent-orders"},xt=T({__name:"MerchantDashboard",setup(wt){const x=L(),f=G(),c=O({totalProducts:0,onSaleProducts:0,totalOrders:0,pendingOrders:0,shippedOrders:0,totalRevenue:0,todayRevenue:0}),w=O([]),M=async()=>{try{const{data:o}=await J();c.value=o||{totalProducts:0,onSaleProducts:0,totalOrders:0,pendingOrders:0,shippedOrders:0,totalRevenue:0,todayRevenue:0}}catch(o){console.error("加载统计数据失败:",o)}},P=async()=>{try{const{data:o}=await K({page:1,size:5});w.value=o?.list||[]}catch(o){console.error("加载最近订单失败:",o)}},A=o=>({UNPAID:"warning",PAID:"primary",SHIPPED:"success",FINISHED:"success",CLOSED:"info"})[o]||"info",D=o=>({UNPAID:"待付款",PAID:"已付款",SHIPPED:"已发货",FINISHED:"已完成",CLOSED:"已关闭"})[o]||o,E=o=>{x.push(`/merchant/orders/${o}`)},C=()=>{f.logout(),U.success("退出成功"),x.push("/login")};return z(()=>{f.initUser(),M(),P(),setTimeout(async()=>{const o=document.getElementById("merchant-trend");if(o){const p=k(o),{data:m}=await j(30);p.setOption({tooltip:{trigger:"axis"},legend:{data:["GMV","订单数"]},xAxis:{type:"category",data:m.labels},yAxis:[{type:"value",name:"GMV"},{type:"value",name:"订单数"}],series:[{name:"GMV",type:"line",data:m.gmv,yAxisIndex:0,smooth:!0},{name:"订单数",type:"line",data:m.orders,yAxisIndex:1,smooth:!0}]})}const t=document.getElementById("merchant-top");if(t){const p=k(t),{data:m}=await q();p.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:m.labels},yAxis:{type:"value"},series:[{name:"销量",type:"bar",data:m.values}]})}},0)}),(o,t)=>{const p=l("el-menu-item"),m=l("el-menu"),g=l("el-button"),$=l("el-header"),n=l("el-card"),d=l("el-col"),y=l("el-row"),b=l("el-icon"),_=l("el-table-column"),N=l("el-tag"),R=l("el-table"),B=l("el-main");return h(),I("div",W,[s($,{class:"header"},{default:e(()=>[a("div",X,[t[10]||(t[10]=a("div",{class:"logo"},[a("h2",null,"商家后台管理系统")],-1)),s(m,{mode:"horizontal",router:!0,class:"nav-menu"},{default:e(()=>[s(p,{index:"/merchant"},{default:e(()=>[...t[4]||(t[4]=[u("首页",-1)])]),_:1}),s(p,{index:"/merchant/products"},{default:e(()=>[...t[5]||(t[5]=[u("商品管理",-1)])]),_:1}),s(p,{index:"/merchant/orders"},{default:e(()=>[...t[6]||(t[6]=[u("订单管理",-1)])]),_:1}),s(p,{index:"/merchant/settings"},{default:e(()=>[...t[7]||(t[7]=[u("店铺设置",-1)])]),_:1})]),_:1}),a("div",Y,[v(f).isLoggedIn()?(h(),I(F,{key:0},[a("span",null,"欢迎，"+i(v(f).user?.nickname||v(f).user?.username),1),s(g,{onClick:C,type:"text"},{default:e(()=>[...t[8]||(t[8]=[u("退出",-1)])]),_:1})],64)):(h(),V(g,{key:1,onClick:t[0]||(t[0]=r=>o.$router.push("/login")),type:"primary"},{default:e(()=>[...t[9]||(t[9]=[u("登录",-1)])]),_:1}))])])]),_:1}),s(B,{class:"main-content"},{default:e(()=>[a("div",Z,[t[28]||(t[28]=a("h2",null,"商家后台首页",-1)),a("div",tt,[s(y,{gutter:20},{default:e(()=>[s(d,{span:4},{default:e(()=>[s(n,{class:"stat-card"},{default:e(()=>[a("div",st,[a("div",et,i(c.value.totalProducts),1),t[11]||(t[11]=a("div",{class:"stat-label"},"商品总数",-1))])]),_:1})]),_:1}),s(d,{span:4},{default:e(()=>[s(n,{class:"stat-card"},{default:e(()=>[a("div",at,[a("div",ot,i(c.value.onSaleProducts),1),t[12]||(t[12]=a("div",{class:"stat-label"},"在售商品",-1))])]),_:1})]),_:1}),s(d,{span:4},{default:e(()=>[s(n,{class:"stat-card"},{default:e(()=>[a("div",nt,[a("div",lt,i(c.value.totalOrders),1),t[13]||(t[13]=a("div",{class:"stat-label"},"订单总数",-1))])]),_:1})]),_:1}),s(d,{span:4},{default:e(()=>[s(n,{class:"stat-card"},{default:e(()=>[a("div",dt,[a("div",rt,i(c.value.pendingOrders),1),t[14]||(t[14]=a("div",{class:"stat-label"},"待处理订单",-1))])]),_:1})]),_:1}),s(d,{span:4},{default:e(()=>[s(n,{class:"stat-card"},{default:e(()=>[a("div",it,[a("div",ut,i(c.value.shippedOrders),1),t[15]||(t[15]=a("div",{class:"stat-label"},"已发货订单",-1))])]),_:1})]),_:1}),s(d,{span:4},{default:e(()=>[s(n,{class:"stat-card"},{default:e(()=>[a("div",ct,[a("div",pt,"¥"+i(c.value.totalRevenue),1),t[16]||(t[16]=a("div",{class:"stat-label"},"总收入",-1))])]),_:1})]),_:1})]),_:1}),s(y,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[s(d,{span:6},{default:e(()=>[s(n,{class:"stat-card revenue-card"},{default:e(()=>[a("div",mt,[a("div",_t,"¥"+i(c.value.todayRevenue),1),t[17]||(t[17]=a("div",{class:"stat-label"},"今日收入",-1))])]),_:1})]),_:1})]),_:1})]),a("div",vt,[s(n,{style:{"margin-bottom":"16px"}},{header:e(()=>[...t[18]||(t[18]=[a("div",{class:"card-header"},"最近30天 销售额 / 订单数",-1)])]),default:e(()=>[t[19]||(t[19]=a("div",{id:"merchant-trend",style:{height:"320px"}},null,-1))]),_:1}),s(n,null,{header:e(()=>[...t[20]||(t[20]=[a("div",{class:"card-header"},"热门商品Top5",-1)])]),default:e(()=>[t[21]||(t[21]=a("div",{id:"merchant-top",style:{height:"300px"}},null,-1))]),_:1})]),a("div",ft,[t[25]||(t[25]=a("h3",null,"快捷操作",-1)),s(y,{gutter:20},{default:e(()=>[s(d,{span:6},{default:e(()=>[s(n,{class:"action-card",onClick:t[1]||(t[1]=r=>o.$router.push("/merchant/products"))},{default:e(()=>[a("div",gt,[s(b,{size:"40",color:"#409eff"},{default:e(()=>[s(v(H))]),_:1}),t[22]||(t[22]=a("div",{class:"action-text"},"添加商品",-1))])]),_:1})]),_:1}),s(d,{span:6},{default:e(()=>[s(n,{class:"action-card",onClick:t[2]||(t[2]=r=>o.$router.push("/merchant/orders"))},{default:e(()=>[a("div",yt,[s(b,{size:"40",color:"#67c23a"},{default:e(()=>[s(v(S))]),_:1}),t[23]||(t[23]=a("div",{class:"action-text"},"查看订单",-1))])]),_:1})]),_:1}),s(d,{span:6},{default:e(()=>[s(n,{class:"action-card",onClick:t[3]||(t[3]=r=>o.$router.push("/merchant/settings"))},{default:e(()=>[a("div",bt,[s(b,{size:"40",color:"#e6a23c"},{default:e(()=>[s(v(S))]),_:1}),t[24]||(t[24]=a("div",{class:"action-text"},"店铺设置",-1))])]),_:1})]),_:1})]),_:1})]),a("div",ht,[t[27]||(t[27]=a("h3",null,"最近订单",-1)),s(R,{data:w.value,style:{width:"100%"}},{default:e(()=>[s(_,{prop:"orderNo",label:"订单号",width:"180"}),s(_,{prop:"user.nickname",label:"买家",width:"120"}),s(_,{prop:"totalAmount",label:"金额",width:"100"},{default:e(r=>[u(" ¥"+i(r.row.totalAmount),1)]),_:1}),s(_,{prop:"status",label:"状态",width:"100"},{default:e(r=>[s(N,{type:A(r.row.status)},{default:e(()=>[u(i(D(r.row.status)),1)]),_:2},1032,["type"])]),_:1}),s(_,{prop:"createdAt",label:"创建时间",width:"180"}),s(_,{label:"操作",width:"120"},{default:e(r=>[s(g,{size:"small",onClick:Ot=>E(r.row.id)},{default:e(()=>[...t[26]||(t[26]=[u(" 查看详情 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),_:1})])}}}),At=Q(xt,[["__scopeId","data-v-69d2ef6b"]]);export{At as default};
