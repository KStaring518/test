import{r as t,o as x,q as z,E as m,u as U,c as C,f as a,g as q,t as p,z as w,a as i,b as V,w as c,h as v,e as N}from"./index-jh95nJwH.js";import{_ as A,g as P}from"./_plugin-vue_export-helper-BDJoutlP.js";const R={class:"payment-container"},T={class:"payment-header"},E={class:"payment-methods"},I={class:"method-radio"},H={class:"method-radio"},L={class:"payment-actions"},D={key:0,class:"alipay-page"},F={class:"alipay-header"},S=["innerHTML"],j={__name:"Payment",setup(G){const y=z(),r=U(),s=t(""),f=t(0),l=t("alipay"),d=t(!1),g=t(!1),k=t("");x(()=>{if(s.value=y.query.orderNo||"",f.value=parseFloat(y.query.totalAmount)||0,!s.value){m.error("订单信息不完整"),r.push("/orders");return}const o=P();window.location.href=`${o}/alipay/create-page?orderNo=${encodeURIComponent(s.value)}`});const h=o=>{l.value=o},b=async()=>{if(l.value==="alipay"){const o=P();window.location.href=`${o}/alipay/create-page?orderNo=${encodeURIComponent(s.value)}`}else l.value==="mock"&&await M()},M=async()=>{try{d.value=!0,await new Promise(o=>setTimeout(o,2e3)),m.success("模拟支付成功！"),r.push({path:"/payment/success",query:{orderNo:s.value}})}catch(o){m.error("模拟支付失败："+o.message)}finally{d.value=!1}},B=()=>{g.value=!1,k.value=""},$=()=>{r.push("/orders")};return(o,e)=>{const _=V("el-radio"),u=V("el-button");return N(),C("div",R,[a("div",T,[e[4]||(e[4]=a("h2",null,"订单支付",-1)),a("p",null,"订单号："+p(s.value),1),a("p",null,"支付金额：¥"+p(f.value),1)]),a("div",E,[e[9]||(e[9]=a("h3",null,"选择支付方式",-1)),a("div",{class:w(["payment-method",{active:l.value==="alipay"}]),onClick:e[1]||(e[1]=n=>h("alipay"))},[e[5]||(e[5]=a("div",{class:"method-icon"},[a("i",{class:"el-icon-money"})],-1)),e[6]||(e[6]=a("div",{class:"method-info"},[a("h4",null,"支付宝支付"),a("p",null,"推荐使用支付宝扫码支付")],-1)),a("div",I,[i(_,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=n=>l.value=n),label:"alipay"},null,8,["modelValue"])])],2),a("div",{class:w(["payment-method",{active:l.value==="mock"}]),onClick:e[3]||(e[3]=n=>h("mock"))},[e[7]||(e[7]=a("div",{class:"method-icon"},[a("i",{class:"el-icon-credit-card"})],-1)),e[8]||(e[8]=a("div",{class:"method-info"},[a("h4",null,"模拟支付"),a("p",null,"仅用于测试，无需真实支付")],-1)),a("div",H,[i(_,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=n=>l.value=n),label:"mock"},null,8,["modelValue"])])],2)]),a("div",L,[i(u,{type:"primary",size:"large",onClick:b,loading:d.value},{default:c(()=>[v(p(d.value?"处理中...":"立即支付"),1)]),_:1},8,["loading"]),i(u,{size:"large",onClick:$},{default:c(()=>[...e[10]||(e[10]=[v("返回订单",-1)])]),_:1})]),g.value?(N(),C("div",D,[a("div",F,[e[12]||(e[12]=a("h3",null,"支付宝支付",-1)),i(u,{onClick:B,size:"small"},{default:c(()=>[...e[11]||(e[11]=[v("关闭",-1)])]),_:1})]),a("div",{class:"alipay-content",innerHTML:k.value},null,8,S)])):q("",!0)])}}},O=A(j,[["__scopeId","data-v-d43f1593"]]);export{O as default};
