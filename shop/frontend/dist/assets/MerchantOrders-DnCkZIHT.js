import{d as j,r as p,o as T,c as F,a as t,w as n,b as s,f as u,h as l,t as C,j as I,g as D,u as L,e as g,x as R,E as q}from"./index-jh95nJwH.js";import{u as G}from"./user-TGyX2SHZ.js";import{c as J,j as K}from"./merchant-BqVm6Od2.js";import{_ as Q}from"./_plugin-vue_export-helper-BDJoutlP.js";const W={class:"merchant-orders"},X={class:"header-content"},Y={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Z={class:"pager"},ee=j({__name:"MerchantOrders",setup(te){const f=L(),w=G(),b=p([]),y=p(0),d=p(1),c=p(10),m=p(void 0),S=[{label:"全部",value:void 0},{label:"未支付",value:"UNPAID"},{label:"已支付",value:"PAID"},{label:"已发货",value:"SHIPPED"},{label:"已完成",value:"FINISHED"},{label:"已关闭",value:"CLOSED"}],i=async()=>{const{data:o}=await J({page:d.value,size:c.value,status:m.value});b.value=o.list,y.value=o.total},x=o=>{c.value=o,d.value=1,i()},k=()=>{d.value=1,i()},z=async o=>{try{f.push(`/merchant/orders/${o}`)}catch{}},P=o=>{f.push(`/merchant/orders/${o}`)},E=o=>({UNPAID:"info",PAID:"warning",SHIPPED:"primary",FINISHED:"success",CLOSED:"danger"})[o]||"default";T(()=>{w.initUser(),i()});const N=async o=>{try{await R.confirm("确定关闭该未支付订单？","提示",{type:"warning"}),await K(o),q.success("订单已关闭"),i()}catch{}};return(o,e)=>{const _=s("el-menu-item"),A=s("el-menu"),U=s("el-header"),O=s("el-segmented"),r=s("el-table-column"),V=s("el-tag"),v=s("el-button"),M=s("el-table"),B=s("el-pagination"),$=s("el-card"),H=s("el-main");return g(),F("div",W,[t(U,{class:"header"},{default:n(()=>[u("div",X,[e[6]||(e[6]=u("div",{class:"logo"},[u("h2",null,"订单管理")],-1)),t(A,{mode:"horizontal",router:!0,class:"nav-menu"},{default:n(()=>[t(_,{index:"/merchant"},{default:n(()=>[...e[3]||(e[3]=[l("首页",-1)])]),_:1}),t(_,{index:"/merchant/products"},{default:n(()=>[...e[4]||(e[4]=[l("商品管理",-1)])]),_:1}),t(_,{index:"/merchant/orders"},{default:n(()=>[...e[5]||(e[5]=[l("订单管理",-1)])]),_:1})]),_:1})])]),_:1}),t(H,{class:"main-content"},{default:n(()=>[t($,null,{header:n(()=>[u("div",Y,[e[7]||(e[7]=u("div",null,"商家订单列表",-1)),t(O,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),options:S,onChange:k},null,8,["modelValue"])])]),default:n(()=>[t(M,{data:b.value,stripe:""},{default:n(()=>[t(r,{prop:"id",label:"ID",width:"80"}),t(r,{prop:"orderNo",label:"订单号",width:"180"}),t(r,{prop:"user.username",label:"买家",width:"140"}),t(r,{prop:"totalAmount",label:"金额",width:"120"},{default:n(({row:a})=>[l("¥"+C(a.totalAmount),1)]),_:1}),t(r,{prop:"status",label:"状态",width:"120"},{default:n(({row:a})=>[t(V,{type:E(a.status)},{default:n(()=>[l(C(a.status),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"createdAt",label:"创建时间",width:"180"}),t(r,{label:"操作",width:"260"},{default:n(({row:a})=>[a.status==="PAID"?(g(),I(v,{key:0,size:"small",type:"primary",onClick:h=>z(a.id)},{default:n(()=>[...e[8]||(e[8]=[l("发货",-1)])]),_:2},1032,["onClick"])):D("",!0),a.status==="UNPAID"?(g(),I(v,{key:1,size:"small",type:"warning",onClick:h=>N(a.id)},{default:n(()=>[...e[9]||(e[9]=[l("关闭",-1)])]),_:2},1032,["onClick"])):D("",!0),t(v,{size:"small",onClick:h=>P(a.id)},{default:n(()=>[...e[10]||(e[10]=[l("详情",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),u("div",Z,[t(B,{"current-page":d.value,"onUpdate:currentPage":e[1]||(e[1]=a=>d.value=a),"page-size":c.value,"onUpdate:pageSize":e[2]||(e[2]=a=>c.value=a),total:y.value,layout:"total, prev, pager, next",onCurrentChange:i,onSizeChange:x},null,8,["current-page","page-size","total"])])]),_:1})]),_:1})])}}}),le=Q(ee,[["__scopeId","data-v-b58afcbb"]]);export{le as default};
