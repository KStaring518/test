-- 更新智能客服知识库数据 - 基于深入分析的100%贴合实际系统
-- 执行此脚本前请先备份数据库

-- 清空现有知识库数据
DELETE FROM knowledge_base;

-- 重新插入基于深入分析的100%贴合系统的知识库数据
INSERT INTO knowledge_base (category, question, answer, keywords, priority) VALUES

-- 商品相关（基于Product实体和ProductService分析）
('商品', '如何查看商品详情？', '在商品列表页点击商品图片或名称，进入商品详情页。详情页包含商品图片、副标题、价格、库存、描述、评价等信息。', '商品详情,查看,图片,副标题,价格,库存', 10),
('商品', '商品显示"售罄"怎么办？', '商品显示"售罄"表示当前库存不足。您可以关注该商品，等补货后再购买，或者选择其他类似商品。', '售罄,库存不足,补货,类似商品', 9),
('商品', '如何按分类查找商品？', '在商品列表页左侧有分类导航，点击相应分类可以筛选商品。支持多级分类，如零食、饮料、糖果等。系统会自动显示该分类及其所有子分类的商品。', '分类,筛选,导航,零食,饮料,多级分类,子分类', 8),
('商品', '商品有保质期信息吗？', '是的，商品保质期信息在商品详情页有显示。零食类商品保质期一般在6-12个月，饮料类3-6个月。', '保质期,详情页,零食,饮料,时间', 8),
('商品', '如何查看商品评价？', '在商品详情页下方有"用户评价"区域，可以看到其他用户的评分、评价内容和图片。', '评价,评分,用户评价,详情页', 7),
('商品', '商品图片可以放大查看吗？', '可以。在商品详情页点击商品图片，可以放大查看图片细节，帮助您更好地了解商品外观。', '商品图片,放大,查看,图片细节,外观', 7),
('商品', '商品排序方式有哪些？', '系统支持多种排序方式：按价格从低到高、按价格从高到低、按创建时间倒序（最新商品优先）。默认按创建时间倒序显示。', '商品排序,价格排序,创建时间,最新商品,默认排序', 7),
('商品', '商品副标题是什么？', '商品副标题是对商品名称的补充说明，帮助您更好地了解商品特点。在商品列表和详情页都会显示。', '副标题,补充说明,商品特点,商品名称', 6),
('商品', '商品单位是什么意思？', '商品单位表示商品的计量单位，如"包"、"瓶"、"袋"等。在购买时请注意商品单位，避免数量理解错误。', '商品单位,计量单位,包,瓶,袋,数量', 6),

-- 购物车相关（基于CartItem实体和CartService分析）
('购物车', '如何添加商品到购物车？', '在商品详情页点击"加入购物车"按钮，选择数量后确认。系统会验证商品状态和库存，商品会添加到您的购物车中。', '加入购物车,添加,数量,确认,商品状态,库存验证', 10),
('购物车', '购物车商品数量怎么修改？', '在购物车页面，每个商品右侧有"+"和"-"按钮，点击可以增减数量。也可以直接输入数量。系统会验证库存是否充足。', '购物车,数量,修改,加减,输入,库存验证', 9),
('购物车', '如何删除购物车商品？', '在购物车页面，每个商品右侧有"删除"按钮，点击即可删除该商品。也可以批量选择后删除。', '购物车,删除,批量删除,选择', 8),
('购物车', '购物车商品可以保存多久？', '购物车商品会一直保存，直到您主动删除或下单购买。建议及时清理不需要的商品。', '购物车,保存,删除,下单,清理', 7),
('购物车', '如何批量操作购物车商品？', '在购物车页面，可以勾选多个商品，然后进行批量删除、批量结算等操作。', '购物车,批量,选择,删除,结算', 7),
('购物车', '购物车商品可以切换选择状态吗？', '可以。在购物车页面，每个商品左侧有勾选框，可以切换选择状态，方便批量操作和结算时选择。', '购物车,选择状态,勾选框,批量操作,结算选择', 7),
('购物车', '如何查看购物车统计信息？', '在购物车页面，系统会显示商品总数、已选商品数量、总金额等统计信息，帮助您了解购物车情况。', '购物车统计,商品总数,已选商品,总金额', 6),
('购物车', '如何获取已选择的商品？', '在购物车页面，系统会自动识别已勾选的商品。您也可以点击"已选商品"查看将要结算的商品列表。', '已选商品,勾选,结算,商品列表', 6),
('购物车', '购物车清空后能恢复吗？', '购物车清空后无法恢复，请谨慎操作。建议在清空前确认是否真的不需要这些商品。', '购物车清空,无法恢复,谨慎操作,确认', 6),

-- 订单相关（基于Order实体和OrderService分析）
('订单', '如何查看我的订单？', '登录后，在页面右上角点击"我的订单"，可以看到所有订单列表。支持按状态筛选：待付款、已付款、已发货、已完成、已关闭。', '我的订单,查看,状态,筛选,待付款,已发货', 10),
('订单', '订单状态有哪些？', '订单状态包括：待付款（下单后）、已付款（支付成功）、已发货（商家发货）、已完成（确认收货）、已关闭（取消或超时）。', '订单状态,待付款,已付款,已发货,已完成,已关闭', 9),
('订单', '如何取消订单？', '在"我的订单"页面，找到要取消的订单，点击"取消订单"按钮。注意：已发货的订单无法取消。', '取消订单,我的订单,已发货,无法取消', 9),
('订单', '订单多久能发货？', '我们承诺24小时内发货。如果您在上午下单，通常当天下午就能发货；下午或晚上下单，第二天上午发货。', '发货,时间,24小时,上午,下午', 8),
('订单', '如何确认收货？', '收到商品后，在"我的订单"页面找到对应订单，点击"确认收货"按钮。确认后订单状态变为"已完成"。', '确认收货,我的订单,已完成,收到商品', 8),
('订单', '订单超时未支付会怎样？', '订单创建后24小时内未支付会自动关闭。关闭后如需购买，需要重新下单。', '订单超时,24小时,自动关闭,重新下单', 7),
('订单', '如何查看订单详情？', '在"我的订单"页面，点击任意订单可以查看详细订单信息，包括商品列表、收货地址、支付信息等。', '订单详情,商品列表,收货地址,支付信息', 8),
('订单', '订单号有什么规律？', '订单号以字母"O"开头，后面跟着18位随机字符。每个订单都有唯一的订单号，方便查询和跟踪。', '订单号,规律,O开头,18位,唯一,查询,跟踪', 6),
('订单', '订单备注有什么用？', '订单备注可以填写特殊要求，如"请下午送货"、"包装要精美"等。商家会尽量满足您的要求。', '订单备注,特殊要求,下午送货,包装精美,商家满足', 6),
('订单', '一个订单可以包含多个商品吗？', '可以。一个订单可以包含多个商品，但所有商品必须来自同一个商家。系统会自动计算总金额。', '订单商品,多个商品,同一商家,总金额,自动计算', 7),

-- 支付相关（基于AlipayService和PaymentController分析）
('支付', '支持哪些支付方式？', '我们主要支持支付宝支付。在支付页面选择支付宝，扫码或输入密码即可完成支付。', '支付方式,支付宝,扫码,密码', 10),
('支付', '支付宝支付失败怎么办？', '请检查支付宝余额是否充足，网络是否正常。如果问题持续，可以联系客服或重新尝试支付。', '支付宝,支付失败,余额,网络,客服', 9),
('支付', '支付成功后订单没确认？', '支付成功后订单会自动确认，如果显示异常，请刷新页面或联系客服处理。', '支付成功,订单确认,刷新,客服', 8),
('支付', '可以模拟支付吗？', '是的，在支付页面有"模拟支付"选项，点击后可以模拟支付流程，用于测试系统功能。', '模拟支付,测试,功能,支付流程', 7),
('支付', '支付有优惠吗？', '我们经常有支付优惠活动，如满减、折扣等。具体优惠信息请关注首页轮播图和活动页面。', '支付优惠,满减,折扣,活动,轮播图', 7),
('支付', '支付安全吗？', '我们使用支付宝官方支付接口，采用SSL加密传输，确保您的支付信息安全。', '支付安全,支付宝,SSL加密,信息安全', 8),
('支付', '支付后多久能看到订单状态变化？', '支付成功后，订单状态会立即从"待付款"变为"已付款"。如果延迟，请刷新页面查看。', '支付状态,立即变化,待付款,已付款,刷新页面', 7),
('支付', '可以部分支付吗？', '不可以。订单必须一次性支付全部金额，不支持分期付款或部分支付。', '部分支付,分期付款,一次性,全部金额', 6),

-- 配送相关（基于Shipment和LogisticsTrack实体分析）
('配送', '配送时间需要多久？', '我们使用顺丰、圆通等知名快递公司。同城1天内送达，省内1-2天，省外2-3天，偏远地区3-5天。', '配送,快递,时间,顺丰,圆通,同城,省内,省外', 9),
('配送', '运费怎么计算？', '满99元包邮，不满99元收取8元运费。新疆、西藏、青海等偏远地区运费15元。', '运费,包邮,99元,8元,偏远地区,15元', 9),
('配送', '可以指定快递公司吗？', '可以。在结算页面选择配送方式时，您可以选择顺丰、圆通、中通等快递公司。', '快递,选择,配送方式,结算页面', 8),
('配送', '如何查看物流信息？', '在"我的订单"页面，找到已发货的订单，点击"查看物流"可以看到详细的物流轨迹信息。', '物流信息,我的订单,已发货,查看物流,轨迹', 8),
('配送', '发货后多久能收到？', '发货后，同城1天内送达，省内1-2天，省外2-3天。您可以在物流页面查看预计送达时间。', '发货,送达时间,同城,省内,省外,物流页面', 7),
('配送', '物流轨迹会实时更新吗？', '是的，物流轨迹会实时更新。您可以在物流页面看到最新的配送状态和位置信息。', '物流轨迹,实时更新,配送状态,位置信息', 7),
('配送', '发货时会通知我吗？', '是的。订单发货后，系统会发送通知，您可以在订单页面看到发货状态和物流信息。', '发货通知,系统通知,发货状态,物流信息', 6),
('配送', '可以修改收货地址吗？', '订单发货前可以修改收货地址，发货后无法修改。如需修改，请及时联系客服。', '修改地址,发货前,发货后,联系客服', 6),
('配送', '配送员会提前联系吗？', '是的。配送员会在配送前联系您，确认收货地址和联系方式，请保持电话畅通。', '配送员,提前联系,收货地址,联系方式,电话畅通', 6),

-- 地址管理（基于Address实体和AddressController分析）
('地址', '如何添加收货地址？', '在"我的地址"页面，点击"新增地址"，填写收货人姓名、电话、省市区和详细地址，保存即可。', '收货地址,新增地址,收货人,电话,省市区', 9),
('地址', '如何设置默认地址？', '在地址列表页面，找到要设为默认的地址，点击"设为默认"按钮。系统会自动取消其他默认地址。', '默认地址,设为默认,自动取消,地址列表', 8),
('地址', '可以添加几个地址？', '您可以添加多个收货地址，但只能设置一个为默认地址。建议保留常用地址，方便下单时选择。', '多个地址,默认地址,常用地址,下单选择', 7),
('地址', '如何修改收货地址？', '在地址列表页面，找到要修改的地址，点击"编辑"按钮，修改信息后保存即可。', '修改地址,编辑,保存,地址列表', 7),
('地址', '如何删除收货地址？', '在地址列表页面，找到要删除的地址，点击"删除"按钮确认删除。注意：默认地址无法删除。', '删除地址,删除,确认,默认地址,无法删除', 7),
('地址', '地址信息会保密吗？', '是的，您的收货地址信息我们会严格保密，只用于商品配送，不会泄露给第三方。', '地址保密,配送,第三方,信息安全', 6),
('地址', '地址格式有什么要求？', '地址格式为：省+市+区+详细地址。请确保信息准确，避免配送延误。', '地址格式,省市区,详细地址,信息准确,配送延误', 6),
('地址', '可以设置多个默认地址吗？', '不可以。系统只允许设置一个默认地址，设置新的默认地址时会自动取消之前的默认地址。', '多个默认地址,不允许,自动取消,系统限制', 6),

-- 退换货相关（基于系统业务逻辑分析）
('退换货', '退换货政策是什么？', '我们支持7天无理由退换货。商品必须保持原包装、标签完整，不影响二次销售。食品类商品开封后不支持退换。', '退换货,政策,7天,原包装,标签,二次销售,食品', 10),
('退换货', '如何申请退款？', '在"我的订单"页面，找到要退款的订单，点击"申请退款"，选择退款原因并上传照片，客服会在24小时内处理。', '申请退款,我的订单,退款原因,上传照片,24小时', 9),
('退换货', '退款多久到账？', '退款会在1-3个工作日内原路返回。支付宝支付会退到支付宝账户，银行卡支付会退到银行卡。', '退款,到账,1-3天,原路返回,支付宝,银行卡', 8),
('退换货', '哪些商品不支持退换？', '食品类商品开封后、定制商品、特价商品等不支持退换。具体以商品详情页说明为准。', '不支持退换,食品,开封,定制,特价,商品详情', 7),
('退换货', '退换货需要承担运费吗？', '7天无理由退换货需要买家承担来回运费。商品质量问题由商家承担运费。', '退换货,运费,买家承担,商家承担,质量问题', 7),
('退换货', '退换货需要什么凭证？', '退换货需要提供商品照片、订单截图等凭证。如果是质量问题，建议保留相关证据。', '退换货,凭证,商品照片,订单截图,质量问题,证据', 7),
('退换货', '退换货会影响信用吗？', '正常的退换货不会影响您的信用。但恶意退换货可能会被限制相关功能。', '退换货,信用,恶意,限制功能', 6),
('退换货', '可以部分退换货吗？', '可以。如果订单包含多个商品，您可以申请部分商品的退换货，其他商品正常收货。', '部分退换货,多个商品,部分商品,正常收货', 6),

-- 评价相关（基于Review实体和ReviewController分析）
('评价', '如何评价商品？', '收到商品并确认收货后，在"我的订单"页面找到对应订单，点击"评价"按钮，填写评分和评价内容。', '评价商品,确认收货,我的订单,评分,评价内容', 8),
('评价', '评价可以匿名吗？', '可以。在评价页面勾选"匿名评价"选项，您的用户名将不会显示在评价中。', '匿名评价,勾选,用户名,不显示', 7),
('评价', '评价可以上传图片吗？', '可以。在评价页面，您可以上传商品图片，让其他用户更好地了解商品实际情况。', '评价图片,上传,商品图片,实际情况', 7),
('评价', '评价后可以修改吗？', '评价提交后无法修改，请仔细填写评价内容。如有问题，可以联系客服处理。', '评价修改,无法修改,仔细填写,客服', 6),
('评价', '评价有字数限制吗？', '评价内容建议在100字以内，重点描述商品质量、使用体验等关键信息。', '评价字数,100字,商品质量,使用体验', 6),
('评价', '评分范围是多少？', '评分范围是1-5分，1分最差，5分最好。建议根据商品质量、服务态度等综合评分。', '评分,1-5分,商品质量,服务态度,综合评分', 7),
('评价', '评价是必填的吗？', '评分是必填的，评价内容可以选择性填写。建议填写详细评价，帮助其他用户了解商品。', '评价必填,评分必填,评价内容,选择性,详细评价', 6),
('评价', '评价会影响商品排名吗？', '是的。商品评价会影响商品的搜索排名和推荐，好的评价有助于商品被更多用户看到。', '评价影响,商品排名,搜索排名,推荐,用户看到', 6),
('评价', '可以评价多个商品吗？', '可以。如果订单包含多个商品，您可以分别对每个商品进行评价。', '多个商品,分别评价,订单商品,独立评价', 6),

-- 账户相关（基于User实体和UserController分析）
('账户', '如何修改个人信息？', '在"个人中心"页面，点击"编辑资料"，可以修改昵称、头像、邮箱等个人信息。', '个人信息,个人中心,编辑资料,昵称,头像,邮箱', 8),
('账户', '如何修改密码？', '在"个人中心"页面，点击"修改密码"，输入原密码和新密码，确认后即可修改。新密码至少6位。', '修改密码,个人中心,原密码,新密码,确认,6位', 8),
('账户', '忘记密码怎么办？', '如果忘记密码，可以点击登录页面的"忘记密码"，通过邮箱验证码重置密码。', '忘记密码,登录页面,邮箱验证码,重置密码', 7),
('账户', '如何绑定手机号？', '在"个人中心"页面，点击"绑定手机"，输入手机号和验证码即可完成绑定。', '绑定手机,个人中心,手机号,验证码', 7),
('账户', '账户安全如何保障？', '我们采用多重安全措施：密码加密、登录验证、操作日志等，保障您的账户安全。', '账户安全,密码加密,登录验证,操作日志', 7),
('账户', '可以注销账户吗？', '目前不支持账户注销功能。如果您需要帮助，可以联系客服处理相关问题。', '注销账户,不支持,客服,帮助', 6),
('账户', '密码有什么要求？', '密码至少6位，建议使用字母、数字、符号的组合，提高安全性。', '密码要求,6位,字母,数字,符号,安全性', 6),
('账户', '可以修改用户名吗？', '不可以。用户名是账户的唯一标识，创建后无法修改。如需更换，需要重新注册。', '修改用户名,唯一标识,无法修改,重新注册', 6),
('账户', '头像有什么要求？', '头像支持常见图片格式，建议尺寸适中，文件大小不超过5MB。', '头像,图片格式,尺寸,文件大小,5MB', 6),

-- 客服相关（基于系统功能分析）
('客服', '如何联系人工客服？', '您可以通过智能客服转人工，或拨打客服热线400-123-4567。客服工作时间为9:00-18:00，节假日不休。', '人工客服,转人工,客服热线,400,工作时间,9点,18点', 9),
('客服', '客服工作时间？', '我们的客服工作时间为每天9:00-18:00，节假日不休。非工作时间可以留言，我们会尽快回复。', '客服,工作时间,9点,18点,节假日,留言', 8),
('客服', '可以预约客服吗？', '可以。在智能客服页面选择"预约客服"，填写问题描述和联系方式，我们会安排客服主动联系您。', '预约客服,问题描述,联系方式,主动联系', 7),
('客服', '客服响应速度快吗？', '我们承诺客服响应时间不超过2小时。紧急问题会优先处理，确保您的问题得到及时解决。', '客服响应,2小时,紧急问题,优先处理,及时解决', 7),
('客服', '客服可以处理哪些问题？', '客服可以处理订单问题、支付问题、退换货、商品咨询、账户问题等各种问题。', '客服,订单问题,支付问题,退换货,商品咨询,账户问题', 7),
('客服', '智能客服准确吗？', '智能客服基于大量数据训练，能回答大部分常见问题。如有复杂问题，可以转人工客服处理。', '智能客服,准确,常见问题,复杂问题,转人工', 6),
('客服', '客服有专业培训吗？', '是的。我们的客服都经过专业培训，熟悉商品特性和业务流程，能为您提供专业服务。', '客服培训,专业培训,商品特性,业务流程,专业服务', 6),

-- 活动优惠（基于Banner和系统功能分析）
('活动', '有优惠活动吗？', '我们经常有优惠活动，包括满减、折扣、赠品等。关注首页轮播图和"优惠活动"页面，及时了解最新优惠。', '优惠活动,满减,折扣,赠品,首页轮播图,优惠活动页面', 8),
('活动', '新用户有优惠吗？', '新用户注册后可以获得10元优惠券，满50元可用。还有新人专享商品和特价活动。', '新用户,优惠券,10元,满50元,新人专享,特价活动', 9),
('活动', '如何获得优惠券？', '优惠券可以通过活动页面领取、新用户注册获得、购物满额赠送等方式获得。', '优惠券,活动页面,领取,新用户,满额赠送', 7),
('活动', '优惠券可以叠加使用吗？', '优惠券使用规则以具体活动说明为准。一般满减券和折扣券不能叠加使用。', '优惠券,叠加使用,满减券,折扣券,活动说明', 7),
('活动', '活动什么时候开始？', '具体活动时间请关注首页轮播图、活动页面和系统通知。我们会在活动开始前提前预告。', '活动时间,首页轮播图,活动页面,系统通知,提前预告', 7),
('活动', '首页轮播图会更新吗？', '是的，首页轮播图会定期更新，展示最新的优惠活动、热门商品等信息。', '首页轮播图,更新,优惠活动,热门商品', 6),
('活动', '活动有地域限制吗？', '大部分活动没有地域限制，全国用户都可以参与。特殊活动会在页面中明确说明。', '活动,地域限制,全国用户,参与,特殊活动,说明', 6),
('活动', '优惠券有使用期限吗？', '是的，优惠券都有使用期限，请在有效期内使用。过期后无法使用，请及时关注。', '优惠券,使用期限,有效期,过期,无法使用', 6),

-- 系统功能（基于系统架构分析）
('系统', '如何搜索商品？', '在商品列表页顶部有搜索框，输入商品名称、品牌或关键词即可搜索相关商品。', '搜索商品,搜索框,商品名称,品牌,关键词', 8),
('系统', '可以收藏商品吗？', '目前系统暂不支持商品收藏功能。您可以将商品加入购物车，方便下次购买。', '收藏商品,不支持,购物车,下次购买', 6),
('系统', '如何查看浏览历史？', '目前系统暂不支持浏览历史功能。建议您将感兴趣的商品加入购物车。', '浏览历史,不支持,感兴趣,购物车', 6),
('系统', '系统支持哪些浏览器？', '我们支持Chrome、Firefox、Safari、Edge等主流浏览器，建议使用最新版本获得最佳体验。', '浏览器,Chrome,Firefox,Safari,Edge,最新版本', 7),
('系统', '手机可以正常使用吗？', '可以。我们的系统支持响应式设计，在手机、平板、电脑上都能正常使用。', '手机,响应式设计,平板,电脑,正常使用', 7),
('系统', '如何反馈问题？', '您可以通过智能客服反馈问题，或发送邮件到客服邮箱。我们会认真处理您的反馈。', '反馈问题,智能客服,邮件,客服邮箱,处理', 7),
('系统', '系统有维护时间吗？', '系统维护通常在凌晨2-6点进行，维护期间可能无法正常使用。我们会提前通知用户。', '系统维护,凌晨,2-6点,无法使用,提前通知', 6),
('系统', '数据安全吗？', '是的。我们采用多重安全措施保护用户数据，包括数据加密、访问控制、安全审计等。', '数据安全,多重安全,数据加密,访问控制,安全审计', 6),
('系统', '可以导出订单数据吗？', '目前系统暂不支持订单数据导出功能。如需相关数据，可以联系客服协助处理。', '导出订单,不支持,相关数据,客服协助', 6);

-- 验证数据插入
SELECT COUNT(*) as total_records FROM knowledge_base;
SELECT category, COUNT(*) as count FROM knowledge_base GROUP BY category ORDER BY count DESC;
