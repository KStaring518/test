# 零食商城 Postman 测试使用指南

## 📋 概述

这是基于实际代码分析的零食商城系统完整测试集合，包含所有API端点的功能测试。

## 🚀 快速开始

### 1. 导入测试集合

1. 打开 Postman
2. 点击 "Import" 按钮
3. 选择 `零食商城_Postman测试集合.json` 文件
4. 导入 `零食商城_Postman环境变量.json` 作为环境

### 2. 环境配置

确保以下服务正在运行：
- **后端服务**: `http://localhost:8080`
- **前端服务**: `http://localhost:3000`
- **数据库**: MySQL (端口3306)

### 3. 测试数据准备

运行以下SQL脚本准备测试数据：
```sql
-- 在MySQL中执行
source test_data_preparation.sql;
```

## 📁 测试集合结构

### 1. 系统健康检查
- ✅ 检查系统状态
- ✅ 获取轮播图
- ✅ 获取分类树

### 2. 用户认证测试
- ✅ 管理员登录
- ✅ 商家登录
- ✅ 普通用户登录
- ✅ 用户注册
- ✅ 商家注册申请

### 3. 商品管理测试
- ✅ 获取商品列表（分页、筛选、排序）
- ✅ 获取商品详情
- ✅ 关键词搜索
- ✅ 按分类筛选
- ✅ 价格排序

### 4. 购物车测试
- ✅ 添加商品到购物车
- ✅ 获取购物车列表
- ✅ 更新商品数量
- ✅ 切换商品选择状态
- ✅ 删除购物车商品
- ✅ 获取购物车统计
- ✅ 清空购物车

### 5. 地址管理测试
- ✅ 添加收货地址
- ✅ 获取地址列表
- ✅ 更新地址
- ✅ 删除地址
- ✅ 设置默认地址

### 6. 订单管理测试
- ✅ 创建订单
- ✅ 获取订单列表
- ✅ 获取订单详情
- ✅ 取消订单
- ✅ 确认收货
- ✅ 获取订单统计

### 7. 支付测试
- ✅ 创建支付订单
- ✅ 模拟支付成功
- ✅ 支付宝支付页面

### 8. 评价系统测试
- ✅ 添加商品评价
- ✅ 获取商品评价
- ✅ 匿名评价

### 9. 管理员功能测试
- ✅ 获取用户列表
- ✅ 获取订单列表
- ✅ 创建轮播图
- ✅ 管理轮播图

### 10. 智能客服测试
- ✅ 发送客服消息
- ✅ 获取聊天历史
- ✅ 创建聊天会话

## 🔧 环境变量说明

| 变量名 | 说明 | 示例值 |
|--------|------|--------|
| `base_url` | 后端API基础URL | `http://localhost:8080` |
| `frontend_url` | 前端页面URL | `http://localhost:3000` |
| `admin_username` | 管理员用户名 | `admin` |
| `admin_password` | 管理员密码 | `123456` |
| `merchant_username` | 商家用户名 | `merchant` |
| `merchant_password` | 商家密码 | `123456` |
| `user_username` | 测试用户用户名 | `testuser` |
| `user_password` | 测试用户密码 | `123456` |
| `token_admin` | 管理员Token | 自动设置 |
| `token_merchant` | 商家Token | 自动设置 |
| `token_user` | 用户Token | 自动设置 |

## 📊 测试执行流程

### 阶段1：基础功能测试
1. 运行"系统健康检查"确保服务正常
2. 运行"用户认证测试"获取各种角色的Token
3. 运行"商品管理测试"验证商品相关功能

### 阶段2：核心业务流程测试
1. 运行"购物车测试"验证购物车功能
2. 运行"地址管理测试"设置收货地址
3. 运行"订单管理测试"创建和管理订单
4. 运行"支付测试"验证支付流程

### 阶段3：高级功能测试
1. 运行"评价系统测试"验证评价功能
2. 运行"管理员功能测试"验证管理功能
3. 运行"智能客服测试"验证客服功能

## 🎯 测试重点

### 1. 认证与授权
- JWT Token自动获取和保存
- 不同角色的权限验证
- Token过期处理

### 2. 数据一致性
- 购物车状态同步
- 订单状态流转
- 库存扣减验证

### 3. 业务流程完整性
- 完整的购物流程
- 支付流程验证
- 订单状态管理

### 4. 错误处理
- 参数验证
- 业务逻辑错误
- 系统异常处理

## 🔍 测试验证点

### 响应状态码
- `200`: 成功
- `400`: 客户端错误
- `401`: 未授权
- `403`: 禁止访问
- `404`: 资源不存在
- `500`: 服务器错误

### 响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": { ... }
}
```

### 分页格式
```json
{
  "code": 200,
  "data": {
    "total": 100,
    "totalPages": 10,
    "currentPage": 1,
    "pageSize": 10,
    "list": [ ... ]
  }
}
```

## 🚨 常见问题

### 1. Token获取失败
- 检查用户名密码是否正确
- 确认用户角色权限
- 查看服务器日志

### 2. 接口调用失败
- 检查服务是否启动
- 确认URL路径正确
- 验证请求参数格式

### 3. 数据不一致
- 重新运行测试数据准备脚本
- 检查数据库连接
- 验证业务逻辑

## 📈 性能测试

### 并发测试
- 使用Postman Runner进行批量测试
- 设置适当的延迟时间
- 监控服务器性能

### 压力测试
- 逐步增加请求数量
- 观察响应时间变化
- 记录系统瓶颈

## 🔄 持续集成

### 自动化测试
- 使用Newman CLI运行测试
- 集成到CI/CD流程
- 生成测试报告

### 测试报告
- 查看测试结果统计
- 分析失败用例
- 优化测试用例

## 📝 测试用例编写规范

### 命名规范
- 使用中文描述测试内容
- 按功能模块分组
- 体现测试目的

### 脚本规范
- 每个测试都要验证状态码
- 重要数据要验证完整性
- 使用console.log输出调试信息

### 数据管理
- 使用环境变量管理配置
- 敏感信息不要硬编码
- 提供测试数据清理脚本

## 🎉 总结

这个测试集合覆盖了零食商城系统的所有核心功能，通过系统化的测试可以确保系统质量和稳定性。建议按照测试流程逐步执行，重点关注业务流程的完整性和数据的一致性。
